<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Feedback Detail</title>
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/css/FeedBack.css}">
</head>

<body class="bg-light">

<!-- MAIN WRAPPER -->
<div class="feedback-detail-container" th:object="${fb}">

    <div class="feedback-detail-card">

        <!-- Title -->
        <h4 class="mb-3 fw-bold">Feedback Detail</h4>

        <!-- User info + date -->
        <div class="feedback-header">
            <div class="user-avatar">
                <span th:text="${fb.account.fullName.substring(0,1).toUpperCase()}"></span>
            </div>

            <div>
                <div class="fw-semibold" th:text="${fb.account.fullName}">User</div>
                <small class="text-muted"
                       th:text="${#temporals.format(fb.createdAt,'dd/MM/yyyy HH:mm')}"></small>
            </div>
        </div>

        <!-- Comment -->
        <div class="feedback-comment" th:text="${fb.comment}">
        </div>

        <!-- Rating stars -->
        <div class="feedback-stars mb-4">
            <span th:each="i : ${#numbers.sequence(1,5)}"
                  th:text="${i <= fb.rating ? '★' : '☆'}"
                  class="star"></span>
        </div>


        <!-- Reply Form -->
        <form method="post"
              th:action="@{|/staff/feedback/${fb.feedbackId}/reply|}"
              onsubmit="return confirmEdit();">

            <input type="hidden" name="back" th:value="${back}"/>

            <div class="reply-title">Reply (Có thể sửa lại)</div>

            <textarea class="feedback-reply-box"
                      name="reply"
                      placeholder="Type here..."
                      th:text="${fb.reply}"></textarea>

            <div class="action-buttons mt-3">
                <a class="btn-back" th:href="@{|/staff/feedback?${back}|}">← Back</a>
                <button class="btn-send" type="submit">Send</button>
            </div>
        </form>

    </div>
</div>

<script>
    function confirmEdit() {
        return confirm('Xác nhận gửi/cập nhật phản hồi?');
    }
</script>

</body>
</html>
