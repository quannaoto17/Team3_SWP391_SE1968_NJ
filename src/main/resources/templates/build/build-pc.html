<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/extras/spring-security" lang="en">

<head>
    <meta charset="UTF-8">
    <title>Auto Build PC</title>
    <link rel="stylesheet" th:href="@{/css/BuildStyle.css}">
</head>

<body>
<div sec:authorize="!isAuthenticated()"
     th:replace="layout/header-default :: header-default"></div>
<div sec:authorize="hasRole('ADMIN')"
     th:replace="layout/header-admin :: header-admin"></div>

<div sec:authorize="hasRole('STAFF')"
     th:replace="layout/header-staff :: header-staff"></div>

<div sec:authorize="hasRole('CUSTOMER')"
     th:replace="layout/header-customer :: header-customer"></div>
<div class="container">
    <!-- Sidebar -->
    <div th:replace="~{layout/build-sidebar :: buildSidebar('mainboard')}"></div>

    <!-- Main content -->
    <div class="main-content start-screen">
        <div class="start-content">
            <h1>Auto Build PC</h1>
            <p>Quickly assemble your perfect PC with compatible components.</p>

            <div class="build-options">
                <a th:href="@{/build/mainboard}" class="start-btn manual-build">
                    <span class="btn-icon">ğŸ› ï¸</span>
                    <span class="btn-title">Manual Build</span>
                    <span class="btn-desc">Choose each component yourself</span>
                </a>

                <div class="divider-or">OR</div>

                <button id="btnShowAiAssistant" class="start-btn ai-build">
                    <span class="btn-icon">ğŸ¤–</span>
                    <span class="btn-title">AI Assistant</span>
                    <span class="btn-desc">Let AI suggest the perfect build</span>
                </button>
            </div>

            <!-- AI Suggest Section (Hidden by default) -->
            <div id="aiAssistantSection" class="ai-assistant-section" style="display: none;">
                <h2>ğŸš€ Build Preset Assistant</h2>
                <p class="ai-intro-text">Choose a preset based on your needs and budget</p>

                <!-- Quick Selection Options -->
                <div class="quick-options">
                    <h3>Choose Your Build Type</h3>
                    <div class="options-grid">
                        <button class="option-card" data-preset="GAMING_HIGH" data-min-budget="2000">
                            <div class="option-icon">ğŸ®</div>
                            <div class="option-title">Gaming - High End</div>
                            <div class="option-desc">AAA gaming at 1440p/4K</div>
                            <div class="option-budget">Suggested: $2000+</div>
                        </button>

                        <button class="option-card" data-preset="GAMING_MID" data-min-budget="1200">
                            <div class="option-icon">ğŸ¯</div>
                            <div class="option-title">Gaming - Mid Range</div>
                            <div class="option-desc">1080p/1440p gaming</div>
                            <div class="option-budget">Suggested: $1200+</div>
                        </button>

                        <button class="option-card" data-preset="WORKSTATION" data-min-budget="1800">
                            <div class="option-icon">ğŸ’¼</div>
                            <div class="option-title">Workstation</div>
                            <div class="option-desc">3D, video editing, CAD</div>
                            <div class="option-budget">Suggested: $1800+</div>
                        </button>

                        <button class="option-card" data-preset="OFFICE" data-min-budget="600">
                            <div class="option-icon">ğŸ“Š</div>
                            <div class="option-title">Office</div>
                            <div class="option-desc">Productivity & light tasks</div>
                            <div class="option-budget">Suggested: $600+</div>
                        </button>

                        <button class="option-card" data-preset="BUDGET_GAMING" data-min-budget="700">
                            <div class="option-icon">ğŸ’°</div>
                            <div class="option-title">Budget Gaming</div>
                            <div class="option-desc">1080p at medium settings</div>
                            <div class="option-budget">Suggested: $700+</div>
                        </button>

                        <button class="option-card" data-preset="STREAMING" data-min-budget="1800">
                            <div class="option-icon">ğŸ“¹</div>
                            <div class="option-title">Streaming</div>
                            <div class="option-desc">Gaming + streaming</div>
                            <div class="option-budget">Suggested: $1800+</div>
                        </button>
                    </div>
                </div>

                <!-- Budget Input -->
                <div class="budget-input-section">
                    <h3>ğŸ’µ Set Your Budget</h3>
                    <div class="budget-input-wrapper">
                        <label for="totalBudget">Total Budget ($):</label>
                        <input type="number" id="totalBudget" min="500" step="50" value="1500" placeholder="Enter your budget">
                        <button id="btnGetSuggestions" class="btn-ai-suggest" disabled>
                            <span class="btn-text">ğŸ” Get Build Plan</span>
                            <span class="btn-loading" style="display: none;">â³ Processing...</span>
                        </button>
                    </div>
                </div>

                <!-- AI Results -->
                <div id="aiResultSection" class="ai-result-section" style="display: none;">
                    <h3>ğŸ“‹ Your Build Plan</h3>
                    <div id="aiResultContent" class="ai-result-content">
                        <!-- Results will be displayed here -->
                    </div>
                    <div class="result-actions">
                        <button id="btnApplyBuild" class="btn-apply-build">
                            âœ… Apply & Start Building
                        </button>
                        <button id="btnNewSuggestion" class="btn-new-suggestion">
                            ğŸ”„ Try Different Preset
                        </button>
                    </div>
                </div>

                <!-- Error Section -->
                <div id="aiErrorSection" class="ai-error-section" style="display: none;">
                    <p class="error-message"></p>
                </div>

                <button id="btnBackToOptions" class="btn-back">
                    â† Back to Start
                </button>
            </div>
        </div>
    </div>

    <!-- Detail panel -->
    <div class="detail-panel">
        <div class="detail-header">WELCOME</div>
        <div class="detail-body">
            <h3>Get ready to build your dream machine!</h3>
        </div>
    </div>
</div>

<script th:src="@{/js/ai-suggest.js}"></script>
</body>
</html>
